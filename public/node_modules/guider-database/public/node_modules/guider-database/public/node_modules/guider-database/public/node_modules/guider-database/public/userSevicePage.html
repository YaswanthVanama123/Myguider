<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/68a5b899a1.js" crossorigin="anonymous"></script>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
        <script src="https://smtpjs.com/v3/smtp.js"></script>
        <link rel="stylesheet" type="text/css" href="myguider.css">
        <link rel="stylesheet" type="text/css" href="/myguider.css">
    </head>
    <body>
            
        <!-- section8 userServicePage  -->
        <div id="section8" class="">
            <div class="text-left serviceIcon2 fixed-top">
                <i class="fab fa-glide brand-icon iconService"></i>
                <span class="headingServices1">My Guider</span>
            </div>
            <div class="container1">
                <div class="pt-5">
                    <h1 class="serviceHead pt-5">Where you are going</h1>
                </div>
                <div class="services">
                    <div class="service mt-5" onclick="goTodisplay9()">
                        <img src="https://i.postimg.cc/pLYn9760/Whats-App-Image-2023-11-15-at-22-56-54-b40d88aa.jpg" alt="Jobs">
                        <div class="service-text d-none d-lg-block">
                            <h1 class="serviceHead1">Skilled Workers</h1>
                            <span class="serviceSpan">Such as Electrician,Plumber,Driver,Mechanics</span><br /><span class="serviceSpan">maons,daily-wage workers</span>
                        </div>
                        <div class="service-text d-lg-none">
                            <h1 class="serviceHeadSmall">Skilled Workers</h1>
                            <span class="serviceSpanSmall">Such as Electrician,Plumber</span><br /><span class="serviceSpanSmall">Driver,Mechanics,maons, daily-wage workers</span>
                        </div>
                    </div>
                    <div class="service mt-5" onclick="display11()">
                        <img src="https://i.postimg.cc/fLrbF7Wh/OIG-10.jpg" alt="Local Works">
                        <div class="service-text d-lg-none">
                            <h1 class="serviceHeadSmall">Rent or Buy houses or shops</h1>
                            <p class="serviceSpanSmall">Here you can get rent or lease or buy best houses or shops or property</p>
                        </div>
                        <div class="service-text d-none d-lg-block">
                            <h1 class="serviceHead1">Rent or Buy houses or shops</h1>
                            <p class="serviceSpan">Here you can get rent or lease or buy best houses or shops or property</p>
                        </div>
                    </div>
                    <div class="service mt-5" onclick="display15()">
                        <img src="https://i.postimg.cc/J7s569zm/OIG-13.jpg" alt="Shops Tolet">
                        <div class="service-text d-lg-none">
                            <h1 class="serviceHeadSmall">Restaurants or Visiting places in the city</h1>
                            <p class="serviceSpanSmall">Here you can find the restaurants and Visiting places location what you want city of your choice</p>
                        </div>
                        <div class="service-text d-none d-lg-block">
                            <h1 class="serviceHead1">Restaurants or Visiting places in the city</h1>
                            <p class="serviceSpan">Here you can find the restaurants and Visiting places location what you want city of your choice</p>
                        </div>
                    </div>
                    <div class="service mt-5" onclick="display13()">
                        <img src="https://i.postimg.cc/9FcpC1dN/OIG-15.jpg" alt="Part Times">
                        <div class="service-text d-lg-none">
                            <h1 class="serviceHeadSmall">Best Part time Jobs</h1>
                            <p class="serviceSpanSmall">Here are the best part time jobs for you</p>
                        </div>
                        <div class="service-text d-none d-lg-block">
                            <h1 class="serviceHead1">Best Part time Jobs</h1>
                            <p class="serviceSpan">Here are the best part time jobs for you</p>
                        </div>
                    </div>
                </div>
                <div class="text-right ml-auto mt-auto">
                    <span class="logOut" onclick="logout()">Log Out</span>
                </div>
            </div>
        </div>

        <script>


            // Skilled Workers Homepage Implementation

            window.addEventListener('load', function() {
                requestNotificationPermission();
            });
        
        // Function to request notification permission and subscribe for push notifications
        async function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission !== 'denied') {
                const permission = await Notification.requestPermission();
                if (permission === 'granted') {
                    console.log('Notification permission granted');
                    // Register service worker and subscribe for push notifications
                    const registration = await navigator.serviceWorker.register('/service-worker.js');
                    const subscription = await registration.pushManager.subscribe({
                        userVisibleOnly: true,
                        applicationServerKey: 'BAfI3r_RzJi1mT61KNAZ0fYJbMNDRxGLMfn7ZGTbM49wMJ_D0jAzqQKWNxDTOfpWNJ5i0r2DsZfU9H8g0ZXLdss'
                    });
                    // Log subscription object to console for debugging
                    console.log('Subscription object:', subscription);

                    // Extract endpoint, auth, and p256dh values from the subscription object
                    const endpoint = subscription.endpoint;
                    const keys = subscription.toJSON().keys;
                    const auth = keys.auth;
                    const p256dh = keys.p256dh;

                    // Send the endpoint, auth, and p256dh values to the backend
                    await fetch('/user/subscribe', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            endpoint,
                            auth,
                            p256dh
                        })
                    });
                } else {
                    requestNotificationPermission();
                }
            }
        }
    














                    // Function to get the value of a query parameter from the URL
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        
        // Get the userEmail from the URL
        var userEmail = getParameterByName('userEmail');
        
        // Display the userEmail in the console
        console.log("User email:", userEmail);

        function goTodisplay9(){
            window.location.href = '/user/skilledworkers/homepage';
        }

                   // Define the display1 function
                   function display1() {
                    window.location.href = '/';
                }
                
                // Define the display2 function
                function display2(){
                    window.location.href = '/user/signin';
                }
                
                // Define the display5 function
                function display5() {
                    window.location.href = '/business/signup';
                }
                
                // Define the display3 function
                function display3(){
                    window.location.href = '/business/signin';
                }
                
                // Define the display4 function
                function display4(){
                    window.location.href = '/user/signup';
                }
        
                function backToServiceFunction(){
                    window.location.href = '/user/service';
                }

                function logout(){
                    window.location.href = '/';
                }

                function display11(){
                    window.location.href = '/user/property/homepage';
                }
                function display13(){
                    window.location.href = '/user/parttime/homepage';
                }

                function display15(){
                    window.location.href = '/user/businesslocation/homepage'
                }
        

        </script>
    <script src="myguider.js"></script>
    </body>
</html>