<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/68a5b899a1.js" crossorigin="anonymous"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <link rel="stylesheet" type="text/css" href="myguider.css">
    <link rel="stylesheet" type="text/css" href="/myguider.css">
</head>
<body>
    <div id="section6" class="">
        <div class="wrapper">
            <div class="text-left serviceIcon2 fixed-top">
                <i class="fab fa-glide brand-icon iconService"></i>
                <span class="headingServices">My Guider</span>
            </div>


            <div>
                <h1 class="serviceHead pad34">Select your Service</h1>
            </div>
            <div class="col20s">
                <div class="col20" onclick="display77()" ontouchstart="this.classList.toggle('hover');">
                    <div class="container">
                        <div class="front front1" style="background-image: url(https://i.postimg.cc/pLYn9760/Whats-App-Image-2023-11-15-at-22-56-54-b40d88aa.jpg)">
                            <div class="inner">
                                <p class="serviceHead1">Skilled Workers</p>
                                <span></span>
                            </div>
                        </div>
                        <div class="back">
                            <div class="inner">
                                <p class="serviceSpan">Such as Electrician,Plumber, <br>Driver,Mechanics, <br>Bathrroom Cleaning, Chef, Phone reparing <br>Etc...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col20" onclick="GoTodisplay10()" ontouchstart="this.classList.toggle('hover');">
                    <div class="container">
                        <div class="front" style="background-image: url(https://i.postimg.cc/fLrbF7Wh/OIG-10.jpg)">
                            <div class="inner">
                                <p class="serviceHead1">Rent or Sale your houses or shops</p>
                                <span></span>
                            </div>
                        </div>
                        <div class="back">
                            <div class="inner">
                                <p class="serviceSpan">Here you can rent or lease or sold your house or shops or property</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Social Liks codings below-->

                <div class="col20" onclick="GoTodisplay14()" ontouchstart="this.classList.toggle('hover');">
                    <div class="container">
                        <div class="front" style="background-image: url(https://i.postimg.cc/J7s569zm/OIG-13.jpg)">
                            <div class="inner">
                                <p class="serviceHead1">Pin your restaurants or business places location</p>
                                <span></span>
                            </div>
                        </div>
                        <div class="back">
                            <div class="inner">
                                <p class="serviceSpan">Here you can place your location of shops or business places customers easy know your shop address or business places</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col20" onclick="GoTodisplay12()" ontouchstart="this.classList.toggle('hover');">
                    <div class="container">
                        <div class="front" style="background-image: url(https://i.postimg.cc/9FcpC1dN/OIG-15.jpg)">
                            <div class="inner">
                                <p class="serviceHead1">Search for best employee worker for your buisness</p>
                                <span></span>
                            </div>
                        </div>
                        <div class="back">
                            <div class="inner">
                                <p class="serviceSpan">Here you can post for employees or workers or part-times for your business</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="text-right ml-auto mt-auto">
                <span class="logOut" onclick="display1()">Log Out</span>
            </div>
        </div>
    </div>


    <script>
        // Function to get the value of a query parameter from the URL
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        
        // Get the userEmail from the URL
        var userEmail = getParameterByName('userEmail');
        
        // Display the userEmail in the console
        console.log("User email:", userEmail);


            // Define the display1 function
    function display1() {
        window.location.href = '/';
    }

    // Define the display2 function
    function display2(){
        window.location.href = '/user/signin';
    }

    // Define the display5 function
    function display5() {
        window.location.href = '/business/signup';
    }

    // Define the display3 function
    function display3(){
        window.location.href = '/business/signin';
    }

    // Define the display4 function
    function display4(){
        window.location.href = '/user/signup';
    }

    // Define the display7 function 
    function display7(){
        window.location.href = '/business/skilledworkers/registration';
    }

    // Define the display7 function 
async function display77() {
    try {
        const response = await fetch(`/skilledworkers/checkEmail?email=${userEmail}`);
        const data = await response.json();
        if (data.exists) {
            // User email exists in skilled workers table
            alert("You are already registered as a skilled worker.");
            window.location.href = "/business/skilledworkers/homepage";
        } else {
            // User email does not exist in skilled workers table
            window.location.href = '/business/skilledworkers/registration';
        }
    } catch (error) {
        console.error("Error checking email:", error);
        alert("Error checking email. Please try again later.");
    }
}

function GoTodisplay10() {
    var userEmail = getParameterByName('userEmail');
    if (userEmail) {
        fetch(`/business/property/checkEmail?userEmail=${userEmail}`)
            .then(response => {
                if (response.ok) {
                    alert("User email already found in property table.");
                    window.location.href = "/business/property/homepage";
                } else {
                    window.location.href = '/business/property/registration';
                }
            })
            .catch(error => {
                console.error("Error checking email:", error.message);
                alert("Error checking user email. Please try again later.");
            });
    } else {
        // Handle the case when userEmail is not present
        alert("User email is missing. Cannot proceed.");
    }
}



function GoTodisplay12() {
    var userEmail = getParameterByName('userEmail');
    fetch(`/parttime/checkEmail?userEmail=${userEmail}`)
        .then(response => {
            if (response.ok) {
                alert("User email already found in part-time workers table.");
                window.location.href = "/business/parttime/homepage";
                
            } else {
                window.location.href = '/business/parttime/registration';
            }
        })
        .catch(error => {
            console.error("Error checking email:", error.message);
            alert("Error checking user email. Please try again later.");
        });
}
function GoTodisplay14() {
    var userEmail = getParameterByName('userEmail');
    if (!userEmail) {
        alert("User email not found in URL.");
        return;
    }

    fetch(`/businesslocation/checkEmail?userEmail=${userEmail}`)
        .then(response => {
            if (response.ok) {
                return response.json();
            } else {
                throw new Error('Network response was not ok.');
            }
        })
        .then(data => {
            if (data.exists) {
                alert("User email already found in businesslocation table.");
                window.location.href = "/business/businesslocation/homepage";
            } else {
                window.location.href = '/business/businesslocation/registration';
            }
        })
        .catch(error => {
            console.error("Error checking email:", error.message);
            alert("Error checking user email. Please try again later.");
        });
}

// Function to get URL parameters by name
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}



    </script>
    <script src="myguider.js"></script>
</body>